#pragma checksum "C:\Users\LENOVO\source\repos\SignalRProjectUI\SignalRProjectUI\Views\Chat\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "a8146c71b9211cbe94a9b8e16aee1b8c7b9f4f95"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Chat_Index), @"mvc.1.0.view", @"/Views/Chat/Index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\LENOVO\source\repos\SignalRProjectUI\SignalRProjectUI\Views\_ViewImports.cshtml"
using SignalRProjectUI;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\LENOVO\source\repos\SignalRProjectUI\SignalRProjectUI\Views\_ViewImports.cshtml"
using SignalRProjectUI.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"a8146c71b9211cbe94a9b8e16aee1b8c7b9f4f95", @"/Views/Chat/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"56a4c90837e46951ada325b4148c8aaa9b4f8233", @"/Views/_ViewImports.cshtml")]
    public class Views_Chat_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<List<ActiveUsers>>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n\r\n\r\n<script>\r\n    var activeUser = \"\";\r\n    var authenticatedUser = \"\";\r\n    var authenticateUser = \"");
#nullable restore
#line 8 "C:\Users\LENOVO\source\repos\SignalRProjectUI\SignalRProjectUI\Views\Chat\Index.cshtml"
                       Write(User.Identity.Name);

#line default
#line hidden
#nullable disable
            WriteLiteral(@""";


    $(document).ready(() => {


        const connection = new signalR.HubConnectionBuilder()
            .withUrl(""/ChatHub"")
            .withAutomaticReconnect()
            .build();

        connection.start();

        $('#action_menu_btn').click(function () {
            $('.action_menu').toggle();
        });

        $(""body"").on(""click"", ""chat_people"", function () {


        }


        )



        connection.on(""userDisconnected"", userName => {
            $(""#userDisconnected"").html(`${userName} ayrıldı.`);
            $(""#userDisconnected"").fadeIn(2000, () => {
                setTimeout(() => {
                    $(""#userDisconnected"").fadeOut(2000);
                }, 2000)
            });

            $(""#"" + userName).remove();
        })

        connection.on(""userJoined"", userName => {
            $(""#userJoined"").html(`${userName} bağlandı.`);
            $(""#userJoined"").fadeIn(2000, () => {
                setTimeout(() => {
            ");
            WriteLiteral(@"        $(""#userJoined"").fadeOut(2000);
                }, 2000)
            });

        })

        connection.on(""onlineUsers"", result => {
            $(""#onlineUsers"").empty();


            $.each(result, function (index, value) {

                if (value.userName != authenticateUser)
                {
                    var xx = ""'"" + value.userName + ""'"";

                    $("".inbox_chat"").append('<button style=""width:100%; border-style: none;"" onClick=""userClick(' + xx + ')""><div class=""chat_list"" id=""kul_' + value.userName + '""><div  class=""chat_people""> <div class=""chat_img""><img src=""https://ptetutorials.com/images/user-profile.png"" alt=""sunil""> </div> <div class=""chat_ib""><h5>' + value.userName + '<span class=""chat_date"" id=""notification_' + value.userName + '""></span></h5></div></div></div></button>')

                } 


            });

        });
        connection.on(""receiveMessage"", message => {

            //activeUser = message.reciever;

            ");
            WriteLiteral(@"let jsMessage = message.message.trim();
            let notification = ""notification_"" + message.sender;
            if (message.sender == activeUser && jsMessage.length > 0) {



                $("".msg_history"").append('<div class=""incomiitemguserName_msg""><div class=""received_msg""> <div class=""received_withd_msg""> <p>' + message.message + ' </p> <span class=""time_date""> ' + message.hour + '</span> </div> </div> </div>');


            }

            $(""#"" + notification).append('<i class=""fas fa-comment-dots fa-2x""></i><br>Yeni Mesaj');
            $('.msg_history').scrollTop($('.msg_history')[0].scrollHeight);


        });


        $(""#btnGonder"").click(() => {


            let message = $(""#txtMessage"").val().trim();
            if (message.length > 0) {
                $("".msg_history"").append('<div class=""outgoing_msg""><div class=""sent_msg""><p> ' + message + '</p><span class=""time_date""></span></div></div>');
                $('.msg_history').scrollTop($('.msg_history')[0].sc");
            WriteLiteral(@"rollHeight);
                connection.invoke(""SendMessageAsync"", message, activeUser).catch(error => console.log(`Mesaj Gonderilirken Hata Oluştu ${error}`));
                $(""#txtMessage"").val('');

            }


        })

        $('#txtMessage').keypress(function (e) {
            if (e.which == 13) {
                let message = $(""#txtMessage"").val().trim();

                if (message.length > 0) {
                    $("".msg_history"").append('<div class=""outgoing_msg""><div class=""sent_msg""><p> ' + message + '</p><span class=""time_date""></span></div></div>');
                    $('.msg_history').scrollTop($('.msg_history')[0].scrollHeight);

                    connection.invoke(""SendMessageAsync"", message, activeUser).catch(error => console.log(`Mesaj Gonderilirken Hata Oluştu ${error}`));

                    $(""#txtMessage"").val('');
                }

            }
        });

        $(""#txtMessage"").click(() => {
            let notification = ""notification_"" ");
            WriteLiteral(@"+ activeUser;
            $('#' + notification).empty();
        });

    });

    function userClick(parameter) {

        activeUser = parameter;
       
        let notification = ""notification_"" + activeUser;

        $(""#receiver"").html(parameter);
        $('#' + notification).empty();

        $('[id^=kul_]').css(""background-color"", ""#efefef"");
        $(""#kul_"" + activeUser).css(""background-color"", ""#5fdba7"");

        $.ajax({
            url: '/Chat/GetMessage',
            type: 'POST',
            data: { data: parameter },
            dataType: 'json',
            success: function (data) {
                $("".msg_history"").empty();
                $.each(data, function (index, value) {


                    var msgSender = value.sender;

                    if (msgSender == parameter) {

                        $("".msg_history"").append('<div class=""incoming_msg""><div class=""received_msg""> <div class=""received_withd_msg""> <p>' + value.message + ' </p> <span class=""");
            WriteLiteral(@"time_date"">'+ value.hour+'</span> </div> </div> </div>');

                    }
                    else {
                        var msg = value.message;

                        $("".msg_history"").append('<div class=""outgoing_msg""><div class=""sent_msg""><p> ' + msg + '</p><span class=""time_date"">' + value.hour + '</span></div></div>');
                    }



                });
                $('.msg_history').scrollTop($('.msg_history')[0].scrollHeight);
            }
        });
    }

</script>






<br />
<br />
<br />

<div class=""container"">
    <h3 class="" text-center"">Mesajlar</h3>
    <br />

    <div class=""alert alert-success"" id=""userJoined"" style=""display:none;"">

    </div>
    <div class=""alert alert-danger"" id=""userDisconnected"" style=""display:none;"">

    </div>
    <div class=""messaging"">
        <div class=""inbox_msg"">
            <div class=""inbox_people"">
                <div class=""headind_srch"">
                    <div class=""recent_headi");
            WriteLiteral(@"ng"">
                        <h4>Kişiler</h4>
                    </div>
                    <div class=""srch_bar"">
                        <div class=""stylish-input-group"">
                            <input type=""text"" class=""search-bar"" placeholder=""Search"">
                            <span class=""input-group-addon"">
                                <button type=""button""> <i class=""fa fa-search"" aria-hidden=""true""></i> </button>
                            </span>
                        </div>
                    </div>
                </div>
                <div class=""inbox_chat"" id=""onlineUsers"">


");
#nullable restore
#line 217 "C:\Users\LENOVO\source\repos\SignalRProjectUI\SignalRProjectUI\Views\Chat\Index.cshtml"
                     foreach (var item in Model)
                    {
                        if (item.userName != User.Identity.Name)
                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                            <button style=\"width:100%; border-style: none;\"");
            BeginWriteAttribute("onClick", " onClick=\"", 7161, "\"", 7205, 3);
            WriteAttributeValue("", 7171, "userClick(\'", 7171, 11, true);
#nullable restore
#line 221 "C:\Users\LENOVO\source\repos\SignalRProjectUI\SignalRProjectUI\Views\Chat\Index.cshtml"
WriteAttributeValue("", 7182, item.userName.Trim(), 7182, 21, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 7203, "\')", 7203, 2, true);
            EndWriteAttribute();
            WriteLiteral(">\r\n                                <div class=\"chat_list\"");
            BeginWriteAttribute("id", " id=\"", 7263, "\"", 7293, 2);
            WriteAttributeValue("", 7268, "kul_", 7268, 4, true);
#nullable restore
#line 222 "C:\Users\LENOVO\source\repos\SignalRProjectUI\SignalRProjectUI\Views\Chat\Index.cshtml"
WriteAttributeValue("", 7272, item.userName.Trim(), 7272, 21, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(@">
                                    <div class=""chat_people"">
                                        <div class=""chat_img"">
                                            <img src=""https://ptetutorials.com/images/user-profile.png"" alt=""sunil"">
                                        </div> <div class=""chat_ib"">
                                            <h5>
                                                ");
#nullable restore
#line 228 "C:\Users\LENOVO\source\repos\SignalRProjectUI\SignalRProjectUI\Views\Chat\Index.cshtml"
                                           Write(item.userName);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n                                                <span class=\"chat_date\"");
            BeginWriteAttribute("id", " id=\"", 7797, "\"", 7829, 2);
            WriteAttributeValue("", 7802, "notification_", 7802, 13, true);
#nullable restore
#line 229 "C:\Users\LENOVO\source\repos\SignalRProjectUI\SignalRProjectUI\Views\Chat\Index.cshtml"
WriteAttributeValue("", 7815, item.userName, 7815, 14, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(@">

                                                </span>
                                            </h5>
                                        </div>
                                    </div>
                                </div>
                            </button>
");
#nullable restore
#line 237 "C:\Users\LENOVO\source\repos\SignalRProjectUI\SignalRProjectUI\Views\Chat\Index.cshtml"
                        }




                    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"


                </div>
            </div>
            <div class=""mesgs"">
                <h4 class=""text-center"" style=""color: #05728f;font-size: 21px;"" id=""receiver""></h4>
                <hr style=""border-bottom:1px solid #05728f;"" />
                <div id=""msghistory"" class=""msg_history"">



                </div>
                <div class=""type_msg"">
                    <div class=""input_msg_write"">
                        <input id=""txtMessage"" type=""text"" class=""write_msg"" placeholder=""Bir mesaj gönder.."" />
                        <button id=""btnGonder"" class=""msg_send_btn"" type=""button"">
                            <i class=""far fa-paper-plane""></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>




    <div id=""deneme"">


    </div>
</div>
");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<List<ActiveUsers>> Html { get; private set; }
    }
}
#pragma warning restore 1591
